# é¥®è¿¹ (DrinkTrace) - åº”ç”¨æ–‡æ¡£

## ğŸ“± åº”ç”¨æ¦‚è¿°

**é¥®è¿¹** æ˜¯ä¸€æ¬¾ä½¿ç”¨ Flutter å¼€å‘çš„è·¨å¹³å°é¥®å“è®°å½•åº”ç”¨ï¼Œå¸®åŠ©ç”¨æˆ·è¿½è¸ªæ¯æ—¥çš„é¥®å“æ¶ˆè´¹ï¼Œè®°å½•ç”Ÿæ´»ä¸­çš„æ¯ä¸€æ¯ç¾å¥½ã€‚

### æ ¸å¿ƒåŠŸèƒ½
- ğŸµ è®°å½•å„ç±»é¥®å“ï¼ˆèŒ¶ã€é…’ã€å¥¶èŒ¶ç­‰ï¼‰
- ğŸ“Š ç»Ÿè®¡é¥®å“æ¶ˆè´¹æ•°æ®
- ğŸ“” è®°å½•é¥®å“æ—¥è®°
- ğŸ† æˆå°±ç³»ç»Ÿ
- ğŸ¤– AI å¥åº·å»ºè®®
- ğŸ“ˆ æ•°æ®åˆ†æä¸å¯è§†åŒ–

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ |
|------|------|------|
| **æ¡†æ¶** | Flutter | 3.10.8+ |
| **è¯­è¨€** | Dart | ^3.10.8 |
| **çŠ¶æ€ç®¡ç†** | Signals | 6.0.0 |
| **æœ¬åœ°æ•°æ®åº“** | ObjectBox | 4.0.3 |
| **ç½‘ç»œè¯·æ±‚** | Dio | 5.7.0 |
| **è·¯ç”±ç®¡ç†** | Go Router | 14.6.2 |
| **åºåˆ—åŒ–** | Dart Mappable | 4.2.2 |
| **å›¾ç‰‡ç¼“å­˜** | Cached Network Image | 3.4.1 |

### é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ main.dart                    # åº”ç”¨å…¥å£
â”œâ”€â”€ analytics/
â”‚   â””â”€â”€ analytics_sdk.dart       # åŸ‹ç‚¹åˆ†æ SDK
â”œâ”€â”€ models/                      # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ drink_record.dart        # é¥®å“è®°å½•å®ä½“
â”‚   â”œâ”€â”€ drink_record.mapper.dart # åºåˆ—åŒ–ä»£ç 
â”‚   â”œâ”€â”€ drink_stats.dart         # ç»Ÿè®¡æ•°æ®ï¼ˆSignalsï¼‰
â”‚   â””â”€â”€ diary_entry.dart         # æ—¥è®°å®ä½“
â”œâ”€â”€ screens/                     # é¡µé¢
â”‚   â”œâ”€â”€ home_screen.dart         # é¦–é¡µï¼ˆè®°å½•åˆ—è¡¨ï¼‰
â”‚   â”œâ”€â”€ stats_screen.dart        # ç»Ÿè®¡é¡µ
â”‚   â”œâ”€â”€ diary_screen.dart        # æ—¥è®°é¡µ
â”‚   â”œâ”€â”€ achievement_screen.dart  # æˆå°±é¡µ
â”‚   â””â”€â”€ profile_screen.dart      # ä¸ªäººä¸­å¿ƒ
â”œâ”€â”€ widgets/                     # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ drink_card.dart          # é¥®å“è®°å½•å¡ç‰‡
â”‚   â”œâ”€â”€ add_drink_dialog.dart    # æ·»åŠ é¥®å“å¯¹è¯æ¡†
â”‚   â””â”€â”€ add_diary_dialog.dart    # æ·»åŠ æ—¥è®°å¯¹è¯æ¡†
â”œâ”€â”€ router/                      # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ app_router.dart          # Go Router é…ç½®
â”œâ”€â”€ services/                    # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ objectbox_service.dart   # æ•°æ®åº“æœåŠ¡
â”‚   â””â”€â”€ ai_service.dart          # AI æœåŠ¡
â””â”€â”€ utils/
    â””â”€â”€ app_theme.dart           # ä¸»é¢˜å·¥å…·
```

---

## ğŸ“¦ æ ¸å¿ƒä¾èµ–

```yaml
dependencies:
  # çŠ¶æ€ç®¡ç†
  signals: ^6.0.0
  signals_flutter: ^6.0.0
  
  # æœ¬åœ°æ•°æ®åº“
  objectbox: ^4.0.3
  objectbox_flutter_libs: ^4.0.3
  
  # ç½‘ç»œè¯·æ±‚
  dio: ^5.7.0
  http: ^1.1.0
  
  # è·¯ç”±
  go_router: ^14.6.2
  
  # åºåˆ—åŒ–
  dart_mappable: ^4.2.2
  
  # å›¾ç‰‡
  cached_network_image: ^3.4.1
  image_picker: ^1.1.2
  
  # UI ç»„ä»¶
  oc_liquid_glass: ^0.2.1
  
  # å·¥å…·
  shared_preferences: ^2.3.3
  path_provider: ^2.1.4
  share_plus: ^10.1.2
  device_info_plus: ^9.1.0
  package_info_plus: ^9.0.0
  uuid: ^4.2.0
  encrypt: ^5.0.3
  
  # æ€§èƒ½
  flutter_displaymode: ^0.6.0
```

---

## ğŸ¨ è®¾è®¡è§„èŒƒ

### è‰²å½©æ–¹æ¡ˆ

| ç”¨é€” | é¢œè‰²å€¼ | è¯´æ˜ |
|------|--------|------|
| **èƒŒæ™¯è‰²** | `#F5F1E8` | æ¸©æš–çš„ç±³è‰² |
| **å¡ç‰‡èƒŒæ™¯** | `#FFFFFF` | çº¯ç™½ |
| **ä¸»è‰²è°ƒ** | `#2C3E50` | æ·±è“ç° |
| **èŒ¶** | `#E8F5E9` / `#4CAF50` | ç»¿è‰²ç³» |
| **é…’** | `#FFEBEE` / `#E57373` | çº¢è‰²ç³» |
| **å¥¶èŒ¶** | `#FFF8E1` / `#FFB74D` | æ©™è‰²ç³» |

### å­—ä½“è§„èŒƒ

| ç±»å‹ | å¤§å° | å­—é‡ |
|------|------|------|
| å¤§æ ‡é¢˜ | 32px | Bold |
| æ ‡é¢˜ | 24px | Bold |
| æ­£æ–‡ | 14-16px | Regular |
| æ•°å­— | 32-48px | Bold |

### åœ†è§’è§„èŒƒ

| ç»„ä»¶ | åœ†è§’ |
|------|------|
| å¡ç‰‡ | 24px |
| æŒ‰é’® | 12-16px |
| æ ‡ç­¾ | 8-20px |

---

## ğŸ“Š æ•°æ®æ¨¡å‹

### DrinkRecordï¼ˆé¥®å“è®°å½•ï¼‰

```dart
@Entity()
@MappableClass()
class DrinkRecord {
  @Id()
  int id;
  
  String name;           // é¥®å“åç§°
  String category;       // ç±»åˆ«ï¼šèŒ¶ã€é…’ã€å¥¶èŒ¶
  String emoji;          // è¡¨æƒ…ç¬¦å·
  double price;          // ä»·æ ¼
  int rating;            // è¯„åˆ† 1-5
  String mood;           // å¿ƒæƒ…
  String? comment;       // å¤‡æ³¨
  String? imagePath;     // å›¾ç‰‡è·¯å¾„
  DateTime timestamp;    // æ—¶é—´æˆ³
}
```

### DiaryEntryï¼ˆæ—¥è®°æ¡ç›®ï¼‰

```dart
@Entity()
class DiaryEntry {
  @Id()
  int id;
  
  String title;          // æ ‡é¢˜
  String content;        // å†…å®¹
  String? imagePath;     // å›¾ç‰‡è·¯å¾„
  DateTime timestamp;    // æ—¶é—´æˆ³
}
```

---

## ğŸ–¥ï¸ åŠŸèƒ½æ¨¡å—

### 1. é¦–é¡µ (HomeScreen)

**åŠŸèƒ½æè¿°ï¼š**
- æ˜¾ç¤ºæ—¥æœŸå’Œé—®å€™è¯­ï¼ˆæ ¹æ®æ—¶é—´æ®µå˜åŒ–ï¼‰
- ä»Šæ—¥é¥®å“ç»Ÿè®¡å¡ç‰‡ï¼ˆèŒ¶ã€é…’ã€å¥¶èŒ¶æ•°é‡ï¼‰
- æœ€è¿‘è®°å½•åˆ—è¡¨
- æµ®åŠ¨æ·»åŠ æŒ‰é’®

**ç‰¹æ€§ï¼š**
- å®æ—¶æ•°æ®æ›´æ–°
- ä¸‹æ‹‰åˆ·æ–°
- å“åº”å¼å¸ƒå±€

### 2. ç»Ÿè®¡é¡µ (StatsScreen)

**åŠŸèƒ½æè¿°ï¼š**
- å¤šç»´åº¦æ•°æ®ç»Ÿè®¡
- æ—¶é—´ç­›é€‰ï¼ˆå‘¨/æœˆ/å…¨éƒ¨ï¼‰
- åˆ†ç±»ç»Ÿè®¡å›¾è¡¨
- æ¶ˆè´¹è¶‹åŠ¿åˆ†æ

**ç»Ÿè®¡ç»´åº¦ï¼š**
- é¥®å“åˆ†ç±»å æ¯”
- æ¶ˆè´¹é‡‘é¢ç»Ÿè®¡
- æ—¶é—´åˆ†å¸ƒ
- å¿ƒæƒ…åˆ†å¸ƒ

### 3. æ—¥è®°é¡µ (DiaryScreen)

**åŠŸèƒ½æè¿°ï¼š**
- è®°å½•é¥®å“ç›¸å…³æ—¥è®°
- æ”¯æŒå›¾ç‰‡ä¸Šä¼ 
- æ—¶é—´çº¿å±•ç¤º
- ç¼–è¾‘å’Œåˆ é™¤

### 4. æˆå°±é¡µ (AchievementScreen)

**åŠŸèƒ½æè¿°ï¼š**
- è¿ç»­æ‰“å¡å¤©æ•°
- å„ç±»æˆå°±å¾½ç« 
- è¿›åº¦è¿½è¸ª
- æˆå°±è§£é”åŠ¨ç”»

**æˆå°±ç±»å‹ï¼š**
- è®°å½•æ•°é‡æˆå°±
- è¿ç»­æ‰“å¡æˆå°±
- åˆ†ç±»æ¢ç´¢æˆå°±
- ç‰¹æ®Šæ—¥æœŸæˆå°±

### 5. ä¸ªäººä¸­å¿ƒ (ProfileScreen)

**åŠŸèƒ½æè¿°ï¼š**
- ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- æ¯æ—¥ç›®æ ‡è®¾ç½®
- AI é…ç½®ï¼ˆOpenAI APIï¼‰
- æ•°æ®å¤‡ä»½ä¸æ¢å¤
- ä¸»é¢˜åˆ‡æ¢
- é€šçŸ¥è®¾ç½®

**è®¾ç½®é¡¹ï¼š**
- å’–å•¡å› æ‘„å…¥ä¸Šé™
- æ¯æ—¥é¥®æ°´ç›®æ ‡
- é…’ç²¾æ‘„å…¥ç›®æ ‡
- æé†’å¼€å…³

---

## ğŸ¤– AI åŠŸèƒ½

### å¥åº·å»ºè®®

åŸºäºç”¨æˆ·çš„é¥®å“è®°å½•ï¼ŒAI æä¾›ä¸ªæ€§åŒ–å¥åº·å»ºè®®ï¼š

**æ•°æ®æ¥æºï¼š**
- é¥®å“ç±»å‹åˆ†å¸ƒ
- æ¶ˆè´¹é¢‘ç‡
- æ—¶é—´åˆ†å¸ƒ
- ä»·æ ¼åŒºé—´

**å»ºè®®å†…å®¹ï¼š**
- æ°´åˆ†æ‘„å…¥å»ºè®®
- å’–å•¡å› æ§åˆ¶
- ç³–åˆ†æ‘„å…¥æé†’
- é…’ç²¾æ¶ˆè´¹å»ºè®®

**é…ç½®æ–¹å¼ï¼š**
- æ”¯æŒ OpenAI API
- æ”¯æŒ NVIDIA API
- å¯è‡ªå®šä¹‰ API åœ°å€å’Œæ¨¡å‹

---

## ğŸ“ˆ åŸ‹ç‚¹åˆ†æ

### AnalyticsSDK

è‡ªå®šä¹‰åŸ‹ç‚¹ SDKï¼Œç”¨äºæ”¶é›†åº”ç”¨ä½¿ç”¨æ•°æ®ï¼š

**æ”¶é›†æ•°æ®ï¼š**
- é¡µé¢æµè§ˆ (page_view)
- åº”ç”¨å¯åŠ¨ (app_launch)
- åº”ç”¨å‰åå°åˆ‡æ¢
- ç”¨æˆ·æ“ä½œäº‹ä»¶

**æŠ€æœ¯å®ç°ï¼š**
- è®¾å¤‡ä¿¡æ¯æ”¶é›†
- æ‰¹é‡ä¸ŠæŠ¥
- æœ¬åœ°é˜Ÿåˆ—ç¼“å­˜
- è‡ªåŠ¨é‡è¯•æœºåˆ¶

---

## ğŸš€ å¼€å‘æŒ‡å—

### ç¯å¢ƒè¦æ±‚

- Flutter SDK: 3.10.8+
- Dart SDK: ^3.10.8
- Android SDK / Xcode (å¯¹åº”å¹³å°)

### å®‰è£…æ­¥éª¤

```bash
# 1. è·å–ä¾èµ–
flutter pub get

# 2. ç”Ÿæˆä»£ç 
flutter pub run build_runner build --delete-conflicting-outputs

# 3. è¿è¡Œåº”ç”¨
flutter run
```

### ä»£ç ç”Ÿæˆ

é¡¹ç›®ä½¿ç”¨ä»¥ä¸‹ä»£ç ç”Ÿæˆå·¥å…·ï¼š

```bash
# ç”Ÿæˆ ObjectBox å’Œ Dart Mappable ä»£ç 
flutter pub run build_runner build --delete-conflicting-outputs

# ç›‘å¬æ¨¡å¼ï¼ˆå¼€å‘æ—¶ä½¿ç”¨ï¼‰
flutter pub run build_runner watch --delete-conflicting-outputs
```

### æ„å»ºå‘å¸ƒ

```bash
# Android
flutter build apk --release
flutter build appbundle --release

# iOS
flutter build ios --release

# Windows
flutter build windows --release
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### ç½‘ç»œé—®é¢˜

å¦‚æœé‡åˆ°ä¾èµ–ä¸‹è½½é—®é¢˜ï¼Œé…ç½®å›½å†…é•œåƒï¼š

```bash
# Windows PowerShell
$env:PUB_HOSTED_URL="https://pub.flutter-io.cn"
$env:FLUTTER_STORAGE_BASE_URL="https://storage.flutter-io.cn"
flutter pub get
```

### æ•°æ®åº“è¿ç§»

ObjectBox è‡ªåŠ¨å¤„ç†æ•°æ®åº“è¿ç§»ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚

### å›¾ç‰‡å­˜å‚¨

- æœ¬åœ°å›¾ç‰‡å­˜å‚¨åœ¨åº”ç”¨ç›®å½•
- æ”¯æŒä»ç›¸å†Œé€‰æ‹©
- è‡ªåŠ¨å‹ç¼©å¤„ç†

---

## ğŸ”’ éšç§ä¸å®‰å…¨

- æ‰€æœ‰æ•°æ®æœ¬åœ°å­˜å‚¨ï¼Œä¸ä¸Šä¼ æœåŠ¡å™¨
- AI åŠŸèƒ½éœ€è¦ç”¨æˆ·è‡ªè¡Œé…ç½® API Key
- æ”¯æŒæ•°æ®å¯¼å‡ºå’Œå¤‡ä»½
- åŸ‹ç‚¹æ•°æ®åŒ¿ååŒ–å¤„ç†

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä¸ºç§æœ‰é¡¹ç›®ï¼Œä»…ä¾›å­¦ä¹ å’Œä¸ªäººä½¿ç”¨ã€‚

---

## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestã€‚

---

*æ–‡æ¡£ç‰ˆæœ¬: 1.0.0*  
*æœ€åæ›´æ–°: 2026-02-24*
